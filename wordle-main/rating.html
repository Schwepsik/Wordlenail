<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Rating Table</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(to bottom, #77c7f3, #a0d1f5); /* –ì–æ–ª—É–±–æ–π –≥—Ä–∞–¥–∏–µ–Ω—Ç */
            color: #333;
        }

        h1 {
            padding-top:50px;
            color: #fff;
            text-shadow: 0 2px 3px rgba(0, 0, 0, 0.2);
            margin-bottom: 20px;
            font-size: 3em;
            text-align: center;
        }

        table {
            width: 80%;
            max-width: 600px;
            border-collapse: collapse;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            background-color: rgba(255, 255, 255, 0.9); /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –±–µ–ª—ã–π —Ñ–æ–Ω */
            border-radius: 10px;
            overflow: hidden; /* –°–∫—Ä—ã–≤–∞–µ—Ç –ª–∏—à–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
        }

        th, td {
            padding: 15px;
            text-align: left;
        }

        th {
            background-color: #eee;
            font-weight: bold;
            text-transform: uppercase;
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        td {
            border-bottom: 1px solid #ddd;
        }

        td:first-child {
            text-align: center;
            width: 50px; /* –®–∏—Ä–∏–Ω–∞ —Å—Ç–æ–ª–±—Ü–∞ —Ä–∞–Ω–≥–∞ */
        }

        /* –ú–µ–¥–∞–ª–∏ */
        tr:nth-child(1) td:first-child::before {
            content: "ü•á"; /* –ó–æ–ª–æ—Ç–∞—è –º–µ–¥–∞–ª—å */
            margin-right: 5px;
            font-size: 2em;
        }

        tr:nth-child(2) td:first-child::before {
            content: "ü•à"; /* –°–µ—Ä–µ–±—Ä—è–Ω–∞—è –º–µ–¥–∞–ª—å */
            margin-right: 5px;
            font-size: 2em;
        }

        tr:nth-child(3) td:first-child::before {
            content: "ü•â"; /* –ë—Ä–æ–Ω–∑–æ–≤–∞—è –º–µ–¥–∞–ª—å */
            margin-right: 5px;
            font-size: 2em;
        }
        .back-button {
            position: fixed; /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ */
            top: 10px; /* –û—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É */
            left: 10px; /* –û—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞ */
            padding: 0; /* –£–±–∏—Ä–∞–µ–º –ø–æ–ª—è –≤–æ–∫—Ä—É–≥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */
            background-color: transparent; /* –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
            border: none; /* –ë–µ–∑ –≥—Ä–∞–Ω–∏—Ü */
            cursor: pointer; /* –ö—É—Ä—Å–æ—Ä —É–∫–∞–∑–∞—Ç–µ–ª—è */
        }

        .back-button img {
            width: 100px; /* –®–∏—Ä–∏–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */
            height: 50px; /* –í—ã—Å–æ—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */
        }
        /* –ù–æ–≤—ã–π CSS –¥–ª—è –≤—ã—Å–æ—Ç—ã —Å—Ç—Ä–æ–∫ */
        #ratingTable tbody tr { /* –í—Å–µ —Å—Ç—Ä–æ–∫–∏ –≤ —Ç–µ–ª–µ —Ç–∞–±–ª–∏—Ü—ã */
            height: 40px; /* –ó–∞–¥–∞–π—Ç–µ –∂–µ–ª–∞–µ–º—É—é –≤—ã—Å–æ—Ç—É */
        }
    </style>
</head>
<body>
    <a href="/" class="back-button"> <img src="button.png"></a> 
    <h1>User Ratings</h1>
    <table id="ratingTable">
        <thead>
            <tr>
                <th>Rank</th>
                <th>User</th>
                <th>Rating</th>
            </tr>
        </thead>
        <tbody>
            <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—Ç—Ä–æ–∫–∏ —Å —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
        </tbody>
    </table>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            // –ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö —Å /rating.php
            $.ajax({
                url: '/rating.php',
                method: 'GET',
                dataType: 'json', // –û–∂–∏–¥–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
                success: function(data) {
                    var tableBody = $('#ratingTable tbody');
                    tableBody.empty(); // –û—á–∏—â–∞–µ–º —Ç–∞–±–ª–∏—Ü—É –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

                    // –ü—Ä–æ—Ö–æ–¥–∏–º—Å—è –ø–æ –ø–æ–ª—É—á–µ–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–æ–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü—É
                    $.each(data.ranking, function(index, user) {
                        var row = $('<tr></tr>');
                        // –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Å—Ç—É—é —è—á–µ–π–∫—É –¥–ª—è —Ä–∞–Ω–≥–∞ –í–°–ï–ì–î–ê
                        row.append('<td></td>'); 
                        row.append('<td>' + user.name + '</td>');    // –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                        row.append('<td>' + user.score + '</td>');  // –†–µ–π—Ç–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                        tableBody.append(row);
                    });

                    // –ó–∞–ø–æ–ª–Ω—è–µ–º —è—á–µ–π–∫–∏ —Ä–∞–Ω–≥–∞ –¥–ª—è –ø–æ–∑–∏—Ü–∏–π –ø–æ—Å–ª–µ –ø–µ—Ä–≤—ã—Ö —Ç—Ä–µ—Ö
                    $('#ratingTable tbody tr').each(function(index) {
                        if (index >= 3) {
                            $(this).find('td:first-child').text(index + 1); // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ä–∞–Ω–≥–æ–º
                        }
                    });
                },
                error: function() {
                    alert('Error loading user ratings.');
                }
            });
        });
    </script>
</body>
</html>
